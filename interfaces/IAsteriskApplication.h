/**
 * @file IAsteriskApplication.h
*/

#ifndef IASTERISKAPPLICATION_H
#define IASTERISKAPPLICATION_H

#include <vector>
#include <string>

/*
*   Полный перечень приложений, запущенных на Asterisk:
*   asterisk -rx "core show applications"
*/

enum class ecAsteriskApp 
{
	Unknown = 0,		    // неизвестный
	AddQueueMember, 	    //: Динамически добавляет участника в очередь.
	ADSIProg,		 	    //: Загружает Asterisk ADSI-скрипты в телефон.
	AGI,				    //: Выполняет приложение, совместимое с AGI.
	Answer,				    //: Отвечает на канал, если идёт звонок.
	AttendedTransfer,	    //: Контролируемый (attended) перевод на указанный внутренний и контекст TRANSFER_CONTEXT.
	AudioSocket,		    //: Передаёт и принимает аудио между каналом и TCP-сокетом.
	Authenticate,		    //: Аутентифицирует пользователя.
	BackGround,			    //: Воспроизводит аудиофайл, ожидая ввода цифр для перехода на внутренний.
	BackgroundDetect,		//: Фоновое воспроизведение файла с обнаружением речи.
	BlindTransfer,			//: Слепой (blind) перевод канала(ов) на заданный внутренний и контекст.
	Bridge,					//: Соединяет два канала в бридж.
	BridgeAdd,				//: Присоединяет канал к уже существующему бриджу.
	BridgeWait,				//: Помещает звонок в холдинговый бридж до соединения.
	Broadcast,				//: Одновременная трансляция или приём аудио для/с нескольких каналов.
	Busy,					//: Устанавливает на канале состояние «занято».
	CallCompletionCancel,	//: Отменяет услугу «обратный звонок».
	CallCompletionRequest,	//: Запрашивает услугу «обратный звонок» для предыдущего вызова.
	CELGenUserEvent,		//: Генерирует пользовательское событие в CEL (Call Event Logging).
	ChangeMonitor,			//: Изменяет имя файла записи мониторинга канала.
	ChanIsAvail,			//: Проверяет доступность указанного канала.
	ChannelRedirect,		//: Перенаправляет указанный канал на другую точку диалплана.
	ChanSpy,				//: Подслушивает канал и опционально шепчет в него.
	ClearHash,				//: Очищает все ключи указанного хранилища-хэша.
	ConfBridge,				//: Приложение конференц-моста ConfBridge.
	ConfKick,				//: Исключает канал(ы) из заданной конференции ConfBridge.
	Congestion,				//: Устанавливает на канале состояние «перегрузка».
	ContinueWhile,			//: Возобновляет выполнение цикла While.
	ControlPlayback,		//: Воспроизводит файл с возможностью перемотки вперед/назад.
	DAHDIRAS,				//: Выполняет приложение DAHDI ISDN RAS.
	DAHDIScan,				//: Сканирует DAHDI-каналы для мониторинга вызовов.
	DAHDISendCallreroutingFacility,//: Отправляет сообщение о перенаправлении/дефлекции вызова по ISDN.
	DAHDISendKeypadFacility,	//: Отправляет внеполосные цифры по PRI.
	DateTime,				//: Произносит текущее или заданное время в указанном формате.
	DBdeltree,				//: Удаляет ветку (подключ) в базе данных Asterisk.
	DeadAGI,				//: Выполняет AGI на уже разорванном канале.
	Dial,					//: Пытается соединить канал с другим устройством или точкой, создавая разговор.
	Dictate,				//: Виртуальный диктофон.
	Directory,				//: Предоставляет голосовой справочник почтовых ящиков.
    DISA,                   //: Прямой доступ к системе (Direct Inward System Access).
    DumpChan,               //: Выводит подробную информацию о канале.
    EAGI,                   //: Выполняет приложение, совместимое с EAGI (аналог AGI с доступом к аудио).
    Echo,                   //: Эхо-контроль (возврат DTMF и аудио).
    Else,                   //: Определяет ветку «иначе» в условном операторе.
    ElseIf,                 //: Определяет ветку «иначе если».
    EndIf,                  //: Завершает блок If.
    EndWhile,               //: Завершает блок While.
    Exec,                   //: Выполняет указанное приложение диалплана.
    ExecIf,                 //: Условно выполняет приложение диалплана.
    ExecIfTime,             //: Условно выполняет приложение, проверяя текущее время.
    ExitIf,                 //: Завершает выполнение блока If.
    ExitWhile,              //: Завершает выполнение блока While.
    ExtenSpy,               //: Подслушивает канал и опционально шепчет в него.
    ExternalIVR,            //: Интеграция с внешней IVR-системой.
    Flash,                  //: Посылает flash-сигнал на DAHDI-транк.
    ForkCDR,                //: Копирует текущую запись CDR канала для отдельной обработки.
    GetCPEID,               //: Получает CPE ID устройства по ADSI.
    Gosub,                  //: Переходит на метку, сохраняя точку возврата.
    GosubIf,                //: Условный переход на метку с сохранением точки возврата.
    Goto,                   //: Переходит на заданную метку/приоритет/контекст.
    GotoIf,                 //: Условный переход на метку.
    GotoIfTime,             //: Условный переход на метку в зависимости от времени.
    Hangup,                 //: Завершает разговор на канале.
    HangupCauseClear,       //: Очищает информацию о причине разрыва (HANGUPCAUSE).
    IAX2Provision,          //: Применяет шаблон для конфигурации IAX2-абонента.
    ICES,                   //: Кодирует и отправляет поток через ‘ices’.
    If,                     //: Начало условного блока.
    ImportVar,              //: Импортирует переменную из одного канала в другую.
    Incomplete,             //: Возвращает статус AST_PBX_INCOMPLETE (неполное состояние).
    JACK,                   //: Взаимодействие с Jack Audio Connection Kit.
    Log,                    //: Записывает сообщение в лог указанного уровня.
    Macro,                  //: Определяет макрос.
    MacroExclusive,         //: Определяет эксклюзивный макрос.
    MacroExit,              //: Выходит из выполнения макроса.
    MacroIf,                //: Условное исполнение части макроса.
    MeetMe,                 //: Конференц-мост MeetMe.
    MeetMeAdmin,            //: Администрирование конференции MeetMe.
    MeetMeChannelAdmin,     //: Администрирование участников MeetMe (по каналу).
    MeetMeCount,            //: Подсчитывает участников конференции MeetMe.
    MessageSend,            //: Отправляет текстовое сообщение.
    Milliwatt,              //: Генерирует 1004 Hz тестовый тон на 0 dBm (μ-law).
    MixMonitor,             //: Записывает разговор и микширует аудио в реальном времени.
    Monitor,                //: Запуск мониторинга канала (запись в файл).
    Morsecode,              //: Проигрывает сообщение азбукой Морзе.
    MP3Player,              //: Проигрывает MP3-файл, плейлист M3U или поток.
    MSet,                   //: Устанавливает переменные канала или значения функций.
    MusicOnHold,            //: Бесконечно проигрывает музыку удержания.
    NBScat,                 //: Проигрывает локальный поток NBS.
    NoCDR,                  //: Отключает ведение CDR для канала.
    NoOp,                   //: «Пустая» операция (ничего не делает).
    ODBC_Commit,            //: Фиксирует текущую транзакцию в базе ODBC.
    ODBC_Rollback,          //: Откатывает текущую транзакцию в базе ODBC.
    ODBCFinish,             //: Освобождает результаты многопострочного запроса ODBC.
    Originate,              //: Инициация исходящего вызова.
    Page,                   //: Оповещает ряд телефонов (paging).
    Park,                   //: Парковка вызывающего себя (себя “прихани”).
    ParkAndAnnounce,        //: Парковка с аннонсом.
    ParkedCall,             //: Восстановление припаркованного вызова.
    PauseMonitor,           //: Приостанавливает мониторинг канала.
    PauseQueueMember,       //: Приостанавливает участника очереди.
    Pickup,                 //: Перехват звонка на определённый внутренний.
    PickupChan,             //: Перехват конкретного звонящего канала.
    Playback,               //: Проигрывает аудиофайл.
    PlayTones,              //: Проигрывает набор тонов.
    PrivacyManager,         //: Требует ввод номера звонящего при отсутствии CallerID.
    Proceeding,             //: Устанавливает состояние «идёт соединение».
    Progress,               //: Устанавливает состояние «прогресс».
    Queue,                  //: Помещает вызов в очередь.
    QueueLog,               //: Запись событий в файл queue_log.
    QueueUpdate,            //: Обновление queue_log и данных Realtime для исходящих.   
    RaiseException,         //: Генерирует исключительную ситуацию.
    Read,                   //: Читает ввод DTMF в переменную.
    ReadExten,              //: Читает ввод DTMF как внутренний номер.
    ReceiveFAX,             //: Принимает факс и сохраняет в TIFF/F.
    ReceiveMF,              //: Обнаруживает MF-цифры и сохраняет их в переменную.
    ReceiveSF,              //: Обнаруживает SF-цифры и сохраняет их в переменную.
    ReceiveText,            //: Принимает текстовое сообщение.
    Record,                 //: Записывает аудио в файл.
    Reload,                 //: Перезагружает модуль Asterisk (канал ждёт).
    RemoveQueueMember,      //: Удаляет участника из очереди.
    ResetCDR,               //: Сбрасывает текущее состояние CDR.
    RetryDial,              //: Повторно набирает при неудаче с опцией выхода.
    Return,                 //: Возвращение из Gosub.
    Ringing,                //: Устанавливает тон «звонит».
    SayAlpha,               //: Произносит буквы.
    SayAlphaCase,           //: Произносит буквы с учётом регистра.
    SayDigits,              //: Произносит цифры.
    SayMoney,               //: Произносит сумму денег.
    SayNumber,              //: Произносит число.
    SayOrdinal,             //: Произносит порядковое число.
    SayPhonetic,            //: Произносит фонетически.
    SayUnixTime,            //: Произносит время в заданном формате.
    SendDTMF,               //: Отправляет DTMF-цифры.
    SendFAX,                //: Отправляет TIFF/F как факс.
    SendImage,              //: Отправляет изображение.
    SendMF,                 //: Отправляет MF-цифры.
    SendSF,                 //: Отправляет SF-цифры.
    SendText,               //: Отправляет текстовое сообщение.
    SendURL,                //: Отправляет URL.
    Set,                    //: Устанавливает переменные канала или функций.
    SetAMAFlags,            //: Устанавливает AMA-флаги.
    Signal,                 //: Отправляет сигнал ожидающим каналам.
    SIPAddHeader,           //: Добавляет SIP-заголовок к исходящему вызову.
    SIPDtmfMode,            //: Меняет режим DTMF для SIP-вызова.
    SIPRemoveHeader,        //: Удаляет ранее добавленные SIP-заголовки.
    SLAStation,             //: Абонент Shared Line Appearance.
    SLATrunk,               //: Транк Shared Line Appearance.
    SMS,                    //: Отправка SMS через SMS-центры и аналоговые телефоны.
    SoftHangup,             //: Разрывает указанный канал.
    SpeechActivateGrammar,  //: Активирует грамматику распознавания.
    SpeechBackground,       //: Проигрывает звук и ждёт распознавания речи.
    SpeechCreate,           //: Создаёт структуру для распознавания речи.
    SpeechDeactivateGrammar,//: Деактивирует грамматику.
    SpeechDestroy,          //: Завершает сеанс распознавания речи.
    SpeechLoadGrammar,      //: Загружает грамматику.
    SpeechProcessingSound,  //: Меняет фоновый звук обработки речи.
    SpeechStart,            //: Запускает распознавание речи в потоке.
    SpeechUnloadGrammar,    //: Выгружает грамматику.
    StackPop,               //: Извлекает адрес возврата из стека Gosub.
    StartMusicOnHold,       //: Запускает музыку удержания.
    Stasis,                 //: Вызывает внешнее приложение Stasis.
    StopMixMonitor,         //: Останавливает запись MixMonitor и освобождает файл.
    StopMonitor,            //: Останавливает мониторинг канала.
    StopMusicOnHold,        //: Останавливает музыку удержания.
    StopPlayTones,          //: Останавливает воспроизведение тонов.
    StoreDTMF,              //: Сохраняет входящие/исходящие DTMF-цифры.
    StreamEcho,             //: Эхо-возврат по нескольким потокам.
    System,                 //: Выполняет системную команду.
    TestClient,             //: Запускает клиент тестирования интерфейса.
    TestServer,             //: Запускает сервер тестирования интерфейса.
    ToneScan,               //: Ожидает и сканирует тоны прогресса.
    Transfer,               //: Переводит абонента на удалённый внутренний.
    TryExec,                //: Пробует выполнить приложение (всегда возвращает).
    TrySystem,              //: Пробует выполнить системную команду.
    UnpauseMonitor,         //: Снимает паузу с мониторинга.
    UnpauseQueueMember,     //: Возобновляет участника очереди.
    UserEvent,              //: Отправляет пользовательское событие AMI и в Stasis.
    Verbose,                //: Выводит произвольный текст в verbose-логи.
    VMAuthenticate,         //: Аутентификация для доступа к голосовой почте.
    VMSayName,              //: Проигрывает имя пользователя голосовой почты.
    VoiceMail,              //: Оставляет голосовое сообщение.
    VoiceMailMain,          //: Проверяет сообщения в голосовой почте.
    VoiceMailPlayMsg,       //: Проигрывает одно сообщение по ID.
    Wait,                   //: Ждёт заданное время.
    WaitDigit,              //: Ждёт ввода одной цифры.
    WaitExten,              //: Ждёт ввода внутреннего номера.
    WaitForCondition,       //: Ждёт исполнения указанного условия.
    WaitForNoise,           //: Ждёт появления шума.
    WaitForRing,            //: Ждёт сигнала звонка.
    WaitForSignal,          //: Ждёт указанного сигнала.
    WaitForSilence,         //: Ждёт тишины.
    WaitForTone,            //: Ждёт появления тона.
    WaitUntil,              //: Ждёт до указанного момента времени.
    While,                  //: Начинает цикл While.
    Zapateller,             //: Блокирует телемаркетеров сигналом SIT.			
};

// статусы 

enum class ecAsteriskState 
{
    Unknown = 0,
    Down,
    Reserved,
    Offhook,
    Dialing,
    Ring,
    Ringing,
    Up,
    Busy,
    Unavailable
};

namespace utils
{
    bool ParsingAsteriskRawDataRequest(std::vector<std::string> &_lines, const std::string &_rawLines, std::string &_errorDescription);
    void ShowVectorLines(const std::vector<std::string> &_lines);
}

#endif //IASTERISKAPPLICATION_H